---
/* Breakdown panel (bundled module import) */
const { initialState = 'CA', compareSlot } = Astro.props;
const slot = compareSlot ?? 'solo';
---
<div
  class="panel stack"
  data-t1-breakdown
  data-slot={slot}
  data-state={initialState}
>
  <div class="label">
    <strong>Breakdown</strong><span id="bd-state">{initialState}</span>
  </div>

  <div id="chart" class="bar" aria-label="Stacked tax burden bar"></div>

  <table id="tbl" style="width:100%;border-collapse:collapse">
    <thead>
      <tr>
        <th style="text-align:left">Category</th>
        <th style="text-align:right">Amount</th>
        <th style="text-align:right">%</th>
      </tr>
    </thead>
    <tbody></tbody>
    <tfoot>
      <tr>
        <th style="text-align:left">Total</th>
        <th id="tot" style="text-align:right"></th>
        <th id="eff" style="text-align:right"></th>
      </tr>
    </tfoot>
  </table>

  <div class="label">
    <a class="badge" id="export" href={`/report?state=${initialState}`}>Export PDF</a>
  </div>
</div>

<!-- Import the module so Vite bundles dependencies -->
<script type="module">
  import '../scripts/breakdown.ts';
</script>
